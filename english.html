<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>legacylisten - English - legacylisten</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="english.html" class="active"><strong aria-hidden="true">1.</strong> legacylisten - English</a></li><li class="chapter-item expanded "><a href="german.html"><strong aria-hidden="true">2.</strong> legacylisten - Deutsch</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">legacylisten</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="legacylisten"><a class="header" href="#legacylisten">legacylisten</a></h1>
<p><code>legacylisten</code> is a simple CLI audio player I wrote because no
existing one fulfilled my needs.  The main feature is that you can
change how often a song is played (<code>legacylisten</code> is always on
shuffle-all), but there are some other even odder features.</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h2>
<p><code>legacylisten</code> creates a list of all songs in
<code>~/.zvavybir/legacylisten/data</code><sup class="footnote-reference"><a href="#1">1</a></sup> together with their associated
so-called &quot;playing likelihood&quot;<sup class="footnote-reference"><a href="#2">2</a></sup> and volume (the standard values are
10 and 10% respectively).  Then it will choose a song at random with
the probability proportional to it's playing likelihood and plays it,
unless you request something different.</p>
<p>The volume is adjustable on a per-song basis and is saved.  Although
simple (ridiculously trivial indeed) to implement, there is no way to
change the global volume, since I figured that this is better left to
the operating system.  What a audio player can do very good is
recognizing which song is playing and acting according to it.  The
intended use of that feature is to adjust the volume of very quiet
songs once and than the user doesn't have to be bothered ever again.</p>
<p>Another quite obscure feature is that you can not only pause/quit
immediately, but also only on the end of the current song, but the
strangest one is that <code>legacylisten</code> will sever all connection to the
disk if the *NIX signal <code>SIGUSR1</code> arrives and only starts reading
again when <code>SIGUSR2</code> arrives.  <code>SIGUSR1</code> doesn't interrupt an already
playing song since songs are buffered<sup class="footnote-reference"><a href="#3">3</a></sup>.</p>
<h2 id="commands"><a class="header" href="#commands">Commands</a></h2>
<p>Commands are how <code>legacylisten</code> is controlled and consist always out
of a single character.  Originally these were the first letter of the
command name, but since this caused rather strange names (like <code>f</code> –
&quot;<em>f</em>ainter&quot; – to decrease the volume), I settled to just number them
through alphabetically.</p>
<p>To execute a command, just type it's letter (but remember that
terminals are usually line-buffered, meaning that until you press
enter <code>legacylisten</code> won't see – and react to – your input).</p>
<p>The following commands exist:</p>
<ul>
<li><code>?</code>: Shows a list of all command with a help message (essentially
this very one).<sup class="footnote-reference"><a href="#4">4</a></sup></li>
<li><code>a</code>: Increases playing likelihood of the current song by 1.</li>
<li><code>b</code>: Decreases playing likelihood of the current song by 1.</li>
<li><code>c</code>: Quits <code>legacylisten</code> and saves the songs likelihoods and
volumes to <code>~/.zvavybir/legacylisten/songs.csv</code>.</li>
<li><code>d</code>: Pauses playing.</li>
<li><code>e</code>: Resumes playing after pausing with <code>d</code> or <code>l</code> (doesn't
overwrite <code>SIGUSR1</code> though).</li>
<li><code>f</code>: Skips song.</li>
<li><code>g</code>: Increases permanently the volume of the current song by 1% (but
not above 100%).</li>
<li><code>h</code>: Decreases permanently the volume of the current song by 1% (but
not below 0%).</li>
<li><code>i</code>: Shows how long the song is already playing and – if
available<sup class="footnote-reference"><a href="#5">5</a></sup> – how long it will take in total.</li>
<li><code>j</code>: Switches between playing and pausing.</li>
<li><code>k</code>: Quits <code>legacylisten</code> as soon as the current song has finished
playing (takes precedence over <code>l</code>).</li>
<li><code>l</code>: Like <code>k</code>, but just pauses instead of quitting.</li>
<li><code>m</code>: Shows the metadata in the song's id3 tag (the length usually
has to be queried by <code>i</code> since it's rarely saved in the id3 tag).</li>
<li><code>n</code>: Opens the cover image of the song in your preferred image viewer
(it uses <code>mimeopen</code> which is AFAIK not available on MS Windows, so
this won't work there).  If the song has no cover it opens
<code>~/.zvavybir/legacylisten/default.png</code> (doesn't need to be an PNG
file) instead.  For the fallback image I use (and made, so it's
quite bad) see
<a href="https://github.com/zvavybir/legacylisten/blob/master/imgs/default.png">here</a>.</li>
<li><code>o</code>: Stops all repeating (but if the current songs is an repetition
it's not ended immediately; if you want that also skip with <code>f</code>).</li>
<li><code>p</code>: Repeats the current song once.</li>
<li><code>q</code>: Repeats the current song forever.</li>
<li><code>r</code>: Skips to the beginning of the current song or – if it already
is at the beginning – to the previous one.  You can go as many songs
back as you want (or more precisely how many there are).  All played
songs are saved (but only in one run of <code>legacylisten</code>, if you
restart it the history is lost) and if you went back the next song
is the same as previously followed on that song.</li>
</ul>
<h2 id="low-memory-handler"><a class="header" href="#low-memory-handler">Low memory handler</a></h2>
<p>As already briefly pointed out previously, especially older versions
of <code>legacylisten</code> had an horrendous memory footprint, which rendered
my system unusable for a few seconds a couple times.  Under Linux such
problems are usually handled by the OOM killer (which ends the process
with least importance and largest memory consumption), but it turns
out that the Chromium web browser (the free software variant of Google
Chrome), which out of other reasons I'm forced to use every once in a
while, is even worse than my crimes.  Instead of doing something
sensible, I added a routine to <code>legacylisten</code> that watches the amount
of free memory and terminates itself when it falls under some certain
(configurable) threshold (a GiB currently).</p>
<p>This uses currently a wrong notion of &quot;free ram&quot; (it counts memory
used for disk caching as used although it's not; see <a href="https://www.linuxatemyram.com/">this famous
site</a> for more), so it triggers
unnecessarily.  Although this is better than the reverse, the low
memory handler is off as default because of that.</p>
<p>This uses the *NIX function <code>sysconf(3)</code>, so it won't work on outdated
platforms.</p>
<h2 id="configuration-file"><a class="header" href="#configuration-file">Configuration file</a></h2>
<p><code>legacylisten</code> can be configured by the
<code>~/.zvavybir/legacylisten/conffile.csv</code> file.  Despite it's file
extension it's <em>not</em> a real CSV file, just very much inspired by it.
If an option can't be parsed it's just silently ignored, so be
careful.  Every option has an own line (with mandatory newline at the
end, even for the last line and under MS Windows) and every part of it
has to be comma-separated (and every line has to end with a comma).
As an example, this is my configuration file:</p>
<pre><code>data_dir,/media/my_user_name/external_harddrive/legacylisten,
ignore_ram,false,
lang,german,
</code></pre>
<p>There are currently four possible options:</p>
<ul>
<li><code>data_dir</code>: If you have your music collection somewhere else (like
me on an external hard drive or in <code>~/Music</code>) you can use this
option to change the directory <code>legacylisten</code> will search.  The <code>~/</code>
notation is not usable in the configuration file, even under *NIX
systems.</li>
<li><code>minimum_ram</code>: The threshold for the <a href="#low-memory-handler">low memory
handler</a> in bytes.</li>
<li><code>ignore_ram</code>: Disables the low memory handler (possible values are
<code>true</code> and <code>false</code>).  If this is set (currently the default)
<code>minimum_ram</code> is ignored.</li>
<li><code>lang</code>: <code>legacylisten</code> supports basic internationalization and this
is the option to activate it.  There are currently three possible
values for this option:
<ul>
<li><code>english</code>: Sets the language to English (this is the default).</li>
<li><code>german</code> or <code>deutsch</code>: Sets the language to German.</li>
<li><code>custom</code>: If you have a translation file, but it's not included in
the official sources (maybe because you're still working on
finishing it, you just want to try something out or you are
forbidden by legal reasons to publish it under <code>legacylisten</code>'s
<a href="#license">license</a>) this option enables you to still use it.
This option requires two further values, the path to the
translation file and the language ID.  As an example, if English
weren't included already you could use such an option to
circumvent that:
<pre><code>lang,custom,/path/to/file/translation.fl,en-US,
</code></pre>
The path has no requirements about filename or file
extension, but the language identifier <em>has</em> to be correct.</li>
</ul>
</li>
</ul>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>As every software <code>legacylisten</code> too always can be improved.  While
I'm trying to get it usable alone, I don't have unlimited time and
especially not always the best ideas.  If you can help with that or on
some other way (like with a feature request, an additional language or
documentation improvements) <strong>please help</strong>.</p>
<p>I assume that unless stated otherwise every contribution follows the
necessary license.</p>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>Though unusual for a rust program, <code>legacylisten</code> is released under
the GNU General Public License version 3 or (at your option) any later
version.</p>
<p>For more see
<a href="https://github.com/zvavybir/legacylisten/blob/master/LICENSE.md">LICENSE.md</a>.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Although not intended (<a href="https://www.fefe.de/nowindows/">even to the
contrary</a>) <code>legacylisten</code> should
be quite portable (<code>~/</code> refers to the user's home directory – in
<code>legacylisten</code> even under MS Windows).</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">2</sup>
<p>Or &quot;likelihood&quot; for short.</p>
</div>
<div class="footnote-definition" id="3"><sup class="footnote-definition-label">3</sup>
<p>This is of course quite bad on the memory footprint, but it's
the best I could manage so far (at least it's a whole magnitude
better than the worst implementation I had).  If you have an
better idea, <strong>please</strong> <a href="#contributing">contribute</a>!</p>
</div>
<div class="footnote-definition" id="4"><sup class="footnote-definition-label">4</sup>
<p>This command is a bit special since it's handled differently
internally.  You can see this on the one hand directly by it's
special name (only non-letter one) and on the other hand (when you
run <code>legacylisten</code>) that while usually commands are executed
strictly in order this one is run before all others specified on
the same line.</p>
</div>
<div class="footnote-definition" id="5"><sup class="footnote-definition-label">5</sup>
<p><code>legacylisten</code> tries to read it out of the metadata of the audio
file or – if that fails (which happen often, since the underlying
routine seems to be still work-in-progress) – decodes the whole
song a second time to get the length on a simple, but costly way
after a short waiting period.  Until that is fixed (if you can
help, <strong>please</strong> <a href="#contributing">contribute</a>) I wouldn't recommend
skipping multiple songs in short sequence, since per song there's
one thread trying to decode it – even after it's already certain
that it's never needed.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="next" href="german.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="next" href="german.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
